#
# Configuration file 
# for the script https://github.com/nicolargo/ubuntupostinstall
# Modif : NoX
#
# SetupGarmin
# Version : 0.1

# 
# $NUMERO_DE_MA_MONTRE = numero de la montre dans le dossier $HOME/.config/garmin-extractor/

# Actions to be executed before all the others steps
# Use && separator if there is more than 1 action
[preactions]
action_dummy = dpkg -l > /tmp/pkg-before.txt


# The repos section 
# ppa_xxx = ppa:ppauser/ppaname > Add the ppa to the system
# pkg_xxx = pkglist             > Add the package list to the system
# url_xxx = reposurl            > Add the repository URL to the system 
# key_xxx = key                 > Add the repository key to the system 
[repos]
ppa_garminplugin = ppa:andreas-diesner/garminplugin
pkg_garminplugin = garminplugin

# The packages section
# pkgname = pkglist > Add the pkglist to the system
[packages]
development = git git-core
system = python python-pip libusb-1.0-0 python-lxml python-pkg-resources python-poster python-serial


# The Unity configuration section
# theme = themename              > Use the Unity theme themename
# icons = iconsname              > Use the icons theme iconsname
# cursors = cursorssname         > Use the cursors theme cursorsname 
# conky = cfgfile                > .conkyrc URL
[unity]


# The . files section
# Download ans installa . file on the $HOME folder
[dotfiles]

# Actions to be executed after all the others steps
# Use && separator if there is more than 1 action
[postactions]
action_pyusb = pip install pyusb
action_Gextractor = cd $HOME && wget https://github.com/Tigge/Garmin-Forerunner-610-Extractor/archive/master.zip && unzip master.zip && rm -f master.zip*
action_fittcx = cd $HOME && wget https://github.com/Tigge/FIT-to-TCX/archive/master.zip && unzip master.zip  && cp -Rf FIT-to-TCX-master $HOME/Garmin-Forerunner-610-Extractor-master/resources/ && rm -f master.zip*
action_fitparse = cd $HOME && git clone https://github.com/dtcooper/python-fitparse && cp -Rf python-fitparse/fitparse $HOME/Garmin-Forerunner-610-Extractor-master/resources/
action_gcpuploader = cd $HOME && wget http://freefr.dl.sourceforge.net/project/gcpuploader/pygupload_20120516.zip && unzip pygupload_20120516.zip && rm -f pygupload_20120516.zip && cp -Rf pygupload $HOME/Garmin-Forerunner-610-Extractor-master/resources/

action_garminplugin = mkdir -p $HOME/.config/garminplugin && cd $HOME && wget https://github.com/xonel/GFrun/raw/master/resources/garminplugin/garminplugin.xml && mv -f garminplugin.xml  $HOME/.config/garminplugin/
action_GarminDevice = mkdir -p $HOME/.config/garmin-extractor/Garmin/ && cd $HOME && wget https://github.com/xonel/GFrun/raw/master/resources/garminplugin/GarminDevice.xml && mv -f GarminDevice.xml  $HOME/.config/garmin-extractor/Garmin/
action_40-convert_to_tcx = mkdir -p $HOME/.config/garmin-extractor/scripts/ && cd $HOME && wget https://raw.github.com/xonel/GFrun/master/resources/FIT-to-TCX-master/40-convert_to_tcx.py && mv -f 40-convert_to_tcx.py  $HOME/.config/garmin-extractor/scripts/
action_usbstick = cp $HOME/Garmin-Forerunner-610-Extractor-master/resources/ant-usbstick2.rules /etc/udev/rules.d

action_lnActivities = mv $HOME/.config/garmin-extractor/Garmin/Activites $HOME/.config/garmin-extractor/Garmin/Activities_Backup && ln -s $HOME/.config/garmin-extractor/$NUMERO_DE_MA_MONTRE/activities Activites && mv Activities $HOME/.config/garmin-extractor/Garmin/ 

action_setright = chown -R $SUDO_USER:$SUDO_USER $HOME/.config/garminplugin $HOME/.config/garmin-extractor $HOME/Garmin-Forerunner-610-Extractor-master
action_cleanup = rm -Rf $HOME/master.zip* $HOME/GarminDevice.xml* $HOME/garminplugin.xml* $HOME/40-convert_to_tcx.py* $HOME/pygupload_20120516.zip* $HOME/pygupload/ $HOME/python-fitparse/ $HOME/FIT-to-TCX-master
action_dummy = dpkg -l > /tmp/pkg-after.txt
